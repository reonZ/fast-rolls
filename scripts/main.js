(()=>{var D=Object.defineProperty;var r=(t,e)=>D(t,"name",{value:e,configurable:!0});var L=/^\/(?:r|roll|publicroll|pr|gmroll|grm|blindroll|broll|br|selfroll|sr) (.+)/i,E=/\[\[([\dd+ -]+)\]\]$/i,c=["d4","d6","d8","d10","d12","d20","d100"];async function g(t){let e=t.currentTarget.dataset.die;if(!t.shiftKey){C(e,t.ctrlKey);return}let o=ui.chat.element.find("#chat-message"),n=o.val().trim();if(!n){o.val(`/r 1${e}`);return}if(L.test(n)){o.val(l(e,n));return}let i=n.match(E);if(!i){o.val(n+` [[1${e}]]`);return}let s=i.index,p=n.substring(s+2,n.length-2).trim(),h=`${n.substring(0,s)}[[${l(e,p)}]]`;o.val(h)}r(g,"processDie");function l(t,e){let o=new RegExp(`(?<!- *)(\\d+)${t}`,"i"),n=e.match(o);if(!n)return e+` + 1${t}`;let i=n.index,s=Number(n[1]);return e.substring(0,i)+(s+1)+e.substring(i+1)}r(l,"processChatRoll");async function C(t,e){let o=game.system.id==="pf2e"?CONFIG.Dice.rolls.find(s=>s.name==="DamageRoll"):Roll,n=new o(`1${t}`),i=e?CONST.DICE_ROLL_MODES.BLIND:CONST.DICE_ROLL_MODES.PUBLIC;await n.evaluate({async:!0}),n.toMessage({},{rollMode:i})}r(C,"rollDie");var a="fast-rolls";function d(...t){let e=t.filter(o=>typeof o=="string").join("/");return`modules/${a}/templates/${e}.hbs`}r(d,"templatePath");function f(...t){let e=t.filter(o=>typeof o=="string").join("/");return`modules/${a}/images/${e}.webp`}r(f,"imagePath");function m(t){return game.settings.get(a,t)}r(m,"getSetting");async function u(t,e){await b(e),y(e)}r(u,"renderChatLog");async function b(t){let e={light:m("light"),dice:c.map(n=>({type:n,img:f(n)}))},o=await renderTemplate(d("dice"),e);t.find("#chat-form").after(o)}r(b,"injectDice");function y(t){t.find("#fast-rolls-chat-dice .fast-rolls-die").on("click",g)}r(y,"addListeners");Hooks.on("setup",()=>{game.settings.register(a,"light",{name:"Light Dice",type:Boolean,default:!1,config:!0,scope:"client",onChange:t=>{ui.chat.element.find("#fast-rolls-chat-dice").toggleClass("light",t)}})});Hooks.on("renderChatLog",u);})();
//# sourceMappingURL=main.js.map
